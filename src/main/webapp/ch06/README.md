## JSP 내장 객체

- jsp 내에서 선언하지 않고 사용할 수 있는 객체
- jsp 페이지에 별도의 import 문 없이 자유롭게 사용 가능

## 내장 객체의 구조적 특징

서블릿으로 변경된 jsp 코드는 모두 \_jspService() 메서드에 위치함

## request 내장객체

- 사용자 요청과 관련된 기능을 제공하는 내장객체
- 주로 클라이언트에서 서버로 전달되는 정보를 처리하기 위해 사용한다
- html 폼을 통해 입력된 값을 jsp에서 가져올 때 사용

## response 내장객체

- 사용자 응답과 관련된 기능을 제공
- setContentType(), sendRedirect()가 많이 사용됨

## sendRedirect()

- response 내장 객체의 리다이렉션 메소드
- 사용자가 새로운 페이지를 요청할 때와 같이 페이지를 강제로 이동하는 것
- 이동할 url을 웹 브라우저에 보내서 웹 서버에 다시 요청하게 함

## forward 액션태그 vs sendRedirect() 메소드

| Forward 액션태그                               | sendRedirect() 메소드             |
| ---------------------------------------------- | --------------------------------- |
| 같은 웹서버 내에서 자원 요청                   | 다른 웹 서버에도 자원 요청 가능   |
| request 객체가 forward될 페이지에 전달         | 새로운 request 객체가 생성        |
| 브라우저 url에 최초 요청된 페이지 url이 나타남 | 최종 전달된 페이지의 url이 표시됨 |

## 페이지 캐시로 인한 문제

- 브라우저는 일반적으로 서버에 요청한 html 페이지가 변경되지 않는다면 하드디스크에 저장한 내용을 캐싱해서 보여주기 때문에 빠른 처리가 가능하다
- 서버는 캐시로 인해 바뀐 정보가 실시간으로 반영되지 않는 경우를 대비해 "no-cache" 설정을 통해 브라우저와 프록시 서버간 캐시 기능을 제한할 수 있다

## 응답 콘텐츠 관련 메소드

- setContentType(String type) : 웹 브라우저에 응답할 MIME 유형을 설정함
- setCharacterEncoding(String charset) : 서블릿에서 화면을 출력할 때 한글 처리를 위한 캐릭터셋 변환

## out 내장객체

- out은 출력 스트림으로써, 웹 브라우저에 데이터를 전송하는 출력 스트림 내장 객체
- 스크립트릿에서 브라우저로 텍스트를 출력하는 데 사용

## out 내장객체 관련 메소드

- print(String str) : 설정된 str 값을 웹 브라우저에 출력
- println(String str) : 설정된 str 값을 웹 브라우저에 출력, 줄 바꿈 적용 x

## 세션

- 클라이언트와 웹 서버 간의 상태를 지속적으로 유지하는 방법
- http 프로토콜이 비연결형 프로토콜이므로 한 페이지가 출력된 후 그 다음에는 클라이언트와 서버의 연결이 끊어진다. 페이지를 이동할 때 보관해야 할 정보가 있다면 쿠키나 세션을 활용하면 된다

## session 내장객체

- 접속하는 사용자 별로 따로 생성되며 일정시간 유지되고 소멸된다
- setAttribute() 메서드를 이용해 임의의 값을 저장해놓고 활용할 수 있음
- 로그인, 쇼핑몰 장바구니, 웹 페이지 트래킹 분석 기능 구현등에 사용

## config

- 서블릿이 최초로 메모리에 적재될 때 컨테이너는 서블릿 초기화와 관련된 정보를 읽고 javax.servlet.ServletConfig 객체에 저장한다
- config는 ServletConfig 클래스에 대한 참조 변수이다

## application

- 웹 애플리케이션(컨텍스트) 전체를 관리하는 객체이다
- application 객체를 통해 각 서블릿이나 jsp에서 공유하려고 하는 각종 정보를 설정하고 참조할 수 있다
- 서블릿이 실행되는 환경이나 서버 자원과 관련한 정보를 얻거나 로그 파일을 기록하는 작업 등을 수행한다
- 일반적으로 톰캣의 시작과 종료 라이프사이클을 가진다

## pageContext

- 내장 객체중 가장 먼저 생성되며 서블릿마다 하나씩 존재하고, 다른 모든 내장 객체에 대한 프로그램적인 접근 방법을 제공한다

| 메서드        | 설명                                     |
| ------------- | ---------------------------------------- |
| forward(path) | 문자열 path에 지정된 페이지를 전달한다.  |
| include(path) | 문자열 path에 지정된 페이지를 포함시킨다 |

- forward() 메서드는 forward 액션과 동일한 기능을 한다
- include() 메서드는 include 액션과 동일한 기능을 한다

## exception

- page 지시어에서 오류 페이지로 지정된 jsp 페이지에서 예외가 발생할 때 전달되는 java.lang.Throwable의 인스턴스에 대한 참조 변수

## http 프로토콜의 특징

http는 비연결형으로 사용자가 서버에 특정 페이지를 요청하고 요청 결과를 응답받으면 서버와의 연결이 끊기는 형태임 -> jsp에서는 page, request, session, application 내장객체를 통해 서로 다른 페이지에서 처리된 값을 저장하고 공유하기 위한 방법을 제공함

## jsp 내장객체 속성 관리

- application : 모든 사용자가 공유하는 데이터를 저장할 수 있으며 톰캣이 종료될 때까지 데이터를 유지할 수 있다
- session : 사용자마다 분리된 저장 영역이 있으며 페이지 모두에서 공유되는 정보를 관리할 수 있다
- 이것들이 아니라면 : 한 페이지에서 다른 페이지로 데이터를 전달하려면 request 내장객체를 이용해야한다

## jsp 내장객체의 생성 시점과 소멸 시정

| 내장객체    | 생성 시점                            | 소멸 시점                                  |
| ----------- | ------------------------------------ | ------------------------------------------ |
| request     | 해당 페이지 요청 시점                | 해당 페이지 로딩 완료 시점                 |
| session     | 해당 컨텍스트 내 특정 파일 요청 시점 | 웹 브라우저 종료 시점, 일정 시간 경과 시점 |
| application | 웹 애플리케이션 시작 시점            | 웹 애플리케이션 종료 시점                  |

- 각각의 내장객체는 모두 getAttribute(), setAttribute() 메서드를 통해 속성을 저장하거나 가져올 수 있다

## 컨테이너 기반 프로그램

- 프로그램 관점에서 컨테이너란 프로그램 실행에 관여하면서 모듈화된 프로그램을 실행할 수 있게 하고 프로그램 간의 원활한 데이터(객체) 교환을 지원하는 소프트웨어를 말한다
- jsp에서 내장객체를 이용한 속성 관리가 가능한 것은 jsp와 빈즈 객체들이 톰캣이라고 하는 컨테이너에 의해 관리되고 있기 때문이다

## 컨테이너 기반 프로그램의 장점

- 프로그램의 모듈화가 용이
- 모듈 간의 데이터 교환이 용이
- 화면/상태 전환 시 데이터를 유지/관리하기 용이
- 내장객체를 통해 임의의 객체를 각각의 생명주기 시점에 따라 공유

## MVC 패턴

프로그램을 Model, View, Controller 세가지 역할로 구분해 구현하는 소프트웨어 디자인 패턴
